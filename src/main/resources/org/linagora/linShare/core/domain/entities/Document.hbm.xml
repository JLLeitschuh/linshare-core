<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
  <class name="org.linagora.linShare.core.domain.entities.Document" table="DOCUMENT">
    <id column="document_id" name="persistenceId">
      <generator class="native"/>
    </id>
    <property access="field" column="identifier" index="index_document_identifier" name="identifier" not-null="true" unique="true"/>
    <property access="field" column="name" index="index_document_name" name="name" not-null="true"/>
    <property access="field" column="creation_date" name="creationDate" not-null="true" type="calendar"/>
    <property access="field" column="expiration_date" index="index_document_expiration_date" name="expirationDate" not-null="true" type="calendar"/>
    <property access="field" column="type" name="type"/>
    <property access="field" column="encrypted" name="encrypted"/>
    <property access="field" column="shared" name="shared"/>
    <property access="field" column="size" name="size" type="long"/>
    <property access="field" column="file_comment" name="fileComment"/>
    <property access="field" column="thmb_uuid" name="thmbUUID"/>
    
    <many-to-one access="field" class="org.linagora.linShare.core.domain.entities.User" name="owner" not-null="true">
      <column index="index_document_owner_id" name="owner_id"/>
    </many-to-one>
    <list cascade="all,delete-orphan" name="signatures">
      <key>
        <column name="document_id_fk"/>
      </key>
      <list-index column="sortOrder"/>
      <one-to-many class="org.linagora.linShare.core.domain.entities.Signature"/>
    </list>
  </class>
</hibernate-mapping>
