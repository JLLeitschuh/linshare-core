<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
  <typedef class="org.linagora.linShare.core.repository.hibernate.type.GenericEnumType" name="LogAction">
    <param name="enumClass">org.linagora.linShare.core.domain.LogAction</param>
    <param name="identifierMethod">name</param>
    <param name="valueOfMethod">fromString</param>
  </typedef>
  <class discriminator-value="none" name="org.linagora.linShare.core.domain.entities.LogEntry">
    <id name="persistenceId" type="long">
      <column name="id" not-null="true"/>
      <generator class="native"/>
    </id>
    <discriminator column="entryType" not-null="true"/>
    <property access="field" index="index_log_entry_action_date" name="actionDate" type="calendar">
      <column name="action_date" not-null="true"/>
    </property>
    <property access="field" index="index_log_entry_actor_mail" name="actorMail" type="string">
      <column name="actor_mail" not-null="true"/>
    </property>
    <property access="field" index="index_log_entry_actor_first_name" name="actorFirstname" type="string">
      <column name="actor_firstname" not-null="true"/>
    </property>
    <property access="field" index="index_log_entry_actor_last_name" name="actorLastname" type="string">
      <column name="actor_lastname" not-null="true"/>
    </property>
    <property access="field" index="index_log_entry_actor_domain" name="actorDomain" type="string">
      <column name="actor_domain" not-null="false"/>
    </property>
    <property access="field" index="index_log_entry_action" name="logAction" type="LogAction">
      <column name="log_action" not-null="true"/>
    </property>
    <property access="field" name="description" type="string">
      <column name="description"/>
    </property>
    <subclass discriminator-value="file" name="org.linagora.linShare.core.domain.entities.FileLogEntry">
      <property access="field" index="index_filelog_entry_file_name" name="fileName" not-null="false" type="string"/>
      <property access="field" name="fileType" not-null="false" type="string"/>
      <property access="field" name="fileSize" not-null="false" type="long"/>
    </subclass>
    <subclass discriminator-value="user" name="org.linagora.linShare.core.domain.entities.UserLogEntry">
      <property access="field" index="index_userlog_entry_target_mail" name="targetMail" not-null="false" type="string"/>
      <property access="field" name="targetFirstname" not-null="false" type="string"/>
      <property access="field" name="targetLastname" not-null="false" type="string"/>
      <property access="field" name="targetDomain" not-null="false" type="string"/>
      <property access="field" name="expirationDate" not-null="false" type="calendar"/>
    </subclass>
    <subclass discriminator-value="share" name="org.linagora.linShare.core.domain.entities.ShareLogEntry">
      <property access="field" index="index_sharelog_entry_file_name" name="fileName" not-null="false" type="string"/>
      <property access="field" name="fileType" not-null="false" type="string"/>
      <property access="field" name="fileSize" not-null="false" type="long"/>
      <property access="field" index="index_sharelog_entry_target_mail" name="targetMail" not-null="false" type="string"/>
      <property access="field" name="targetFirstname" not-null="false" type="string"/>
      <property access="field" name="targetLastname" not-null="false" type="string"/>
      <property access="field" name="targetDomain" not-null="false" type="string"/>
      <property access="field" name="expirationDate" not-null="false" type="calendar"/>
    </subclass>
    <subclass discriminator-value="antivirus" name="org.linagora.linShare.core.domain.entities.AntivirusLogEntry" />
  </class>
</hibernate-mapping>
