<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping default-access="field" package="org.linagora.linShare.core.domain.entities">
  <typedef class="org.linagora.linShare.core.repository.hibernate.type.GenericEnumType" name="fileSizeEnumType">
    <param name="enumClass">org.linagora.linShare.core.domain.constants.FileSizeUnit</param>
    <param name="identifierMethod">toInt</param>
    <param name="valueOfMethod">fromInt</param>
  </typedef>
  <typedef class="org.linagora.linShare.core.repository.hibernate.type.GenericEnumType" name="timeUnitEnumType">
    <param name="enumClass">org.linagora.linShare.core.domain.constants.TimeUnit</param>
    <param name="identifierMethod">toInt</param>
    <param name="valueOfMethod">fromInt</param>
  </typedef>
  <typedef class="org.linagora.linShare.core.repository.hibernate.type.GenericEnumType" name="userEnumType">
    <param name="enumClass">org.linagora.linShare.core.domain.entities.UserType</param>
    <param name="identifierMethod">toInt</param>
    <param name="valueOfMethod">fromInt</param>
  </typedef>
  <typedef class="org.linagora.linShare.core.repository.hibernate.type.GenericEnumType" name="languageEnumType">
    <param name="enumClass">org.linagora.linShare.core.domain.constants.Language</param>
    <param name="identifierMethod">toInt</param>
    <param name="valueOfMethod">fromInt</param>
  </typedef>
  <class name="Parameter" table="PARAMETER">
    <id column="PARAMETER_ID" name="id"/>
    <property column="FILE_SIZE_MAX" name="fileSizeMax"/>
    <property column="USER_AVAILABLE_SIZE" name="userAvailableSize"/>
    <property column="ACTIVE_MIMETYPE" name="activeMimeType" type="boolean"/>
    <property column="ACTIVE_SIGNATURE" name="activeSignature" type="boolean"/>
    <property column="ACTIVE_ENCIPHERMENT" name="activeEncipherment" type="boolean"/>
    <property column="USER_EXPIRY_TIME" name="guestAccountExpiryTime"/>
    <property column="USER_EXPIRY_TIME_UNIT_ID" name="guestAccountExpiryUnit" type="timeUnitEnumType"/>
    <property column="CUSTOM_LOGO_URL" name="customLogoUrl"/>
    <property column="DEFAULT_EXPIRY_TIME" name="defaultShareExpiryTime"/>
    <property column="DELETE_DOC_EXPIRY_TIME" name="deleteDocWithShareExpiryTime"/>
    
    <property column="DEFAULT_EXPIRY_TIME_UNIT_ID" name="defaultShareExpiryUnit" type="timeUnitEnumType"/>
    <list name="shareExpiryRules" table="SHARE_EXPIRY_RULES">
      <key column="PARAMETER_ID"/>
      <list-index column="RULE_SORT_ORDER"/>
      <composite-element class="ShareExpiryRule">
        <property column="EXPIRY_TIME" name="shareExpiryTime"/>
        <property column="TIME_UNIT_ID" name="shareExpiryUnit" type="timeUnitEnumType"/>
        <property column="SHARE_SIZE" name="shareSize"/>
        <property column="SIZE_UNIT_ID" name="shareSizeUnit" type="fileSizeEnumType"/>
      </composite-element>
    </list>
    <set name="welcomeTexts" table="WELCOME_TEXTS">
      <key column="PARAMETER_ID"/>
      <composite-element class="WelcomeText">
        <property column="WELCOME_TEXT" name="welcomeText" type="text"/>
        <property column="USER_TYPE_ID" name="userType" type="userEnumType"/>
        <property column="LANGUAGE_ID" name="language" type="languageEnumType"/>
      </composite-element>
    </set>
  </class>
</hibernate-mapping>
