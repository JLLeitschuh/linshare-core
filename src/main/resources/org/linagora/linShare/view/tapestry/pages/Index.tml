<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<t:MyBorderLayout t:title="prop:pageTitle" t:identifier="home" t:currentHighlight="home"
	xmlns:t="http://tapestry.apache.org/schema/tapestry_5_0_0.xsd">

	<!-- Main content -->

	<div id="content">


		<!-- HOME PAGE -->

		<t:if test="userVoExists">

			<h1>${pageTitle}</h1>


			<!-- Message panel -->
			<t:messagePanel />
			<div id="messagePanel" class="welcome">
				<!-- Welcome message and LinShare description -->
				<p><t:outputraw t:value="welcomeText" /></p>
			</div><!-- id="messagePanel" -->
			<t:businessMessagesDisplayer />


			<!-- Action bar -->
	
			<div id="actionBar">
				<h4>Actions</h4>
				<ul>
                    <li>
                        <t:if test="userVo.upload">
                            <a href="#" class="button" onclick="quickShareWindow.showCenter(true);">
                                <span><img src="${asset:context:images/icons/share-on-small.png}" alt=""/>
                                    ${message:pages.files.quickshare.button}</span>
                            </a>
                        </t:if>
                    </li>
				</ul>
			</div><!-- id="actionBar" -->


			<!-- Page content -->

			<div id="pageContent">

				<!-- List : Shared files -->
				<t:ListSharedDocument t:shareDocuments="shares" t:user="userVo" inSearch="prop:flag" />

				<!-- Quick share popup -->
				<t:quickSharePopup t:eventName="sharePopupEvent" />

			</div>
			
		</t:if>



		<!-- LOGIN PAGE -->

		<t:if test="userVoExists" negate="true">

			<!-- Message panel -->

			<div id="messagePanel" class="login">
				<p>${message:pages.index.pleaselogin}</p>
			</div><!-- id="messagePanel" -->


			<!-- Page content -->

			<div id="pageContent">
			</div>

		</t:if>


	</div><!-- id="content" -->



	<!-- Popups -->

	<!-- Quick share popup -->
	<!-- Cf. in div id="pageContent" -->



	<!-- Widgets -->

	<!-- Search widget -->
	<t:parameter name="searchWidget">
	<t:if test="userVoExists">
		<t:widget widgetId="searchWidget" title="${message:components.widget.searchWidget.title}">
			<t:SearchFile userlogin="userVo" forceFilterOnSharedFile="true"/>
		</t:widget>
	</t:if>
	</t:parameter>
	
	<!-- Actions widget -->
	<t:parameter name="actionsWidget">
		<t:if test="shares">
			<t:widget widgetId="actionsWidget" title="${message:components.widget.actionsWidget.title}">
				<t:actionsBarShare t:user="userVo" t:formName="search" />
			</t:widget>
		</t:if>
	</t:parameter>
	

</t:MyBorderLayout>
