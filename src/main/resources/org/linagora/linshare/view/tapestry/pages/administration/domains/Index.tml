<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<t:MyBorderLayout t:title="message:pages.administration.domains.index.title" t:identifier="domains" t:currentHighlight="domains"
	xmlns:t="http://tapestry.apache.org/schema/tapestry_5_0_0.xsd">

	<!-- Main content -->

	<div id="content">

		<h1>${message:pages.administration.domains.index.title}</h1>
		
		<t:messagePanel />	
		
		<div id="pageContent">
		
			<h2>${message:pages.administration.domains.index.add}</h2>
			
			<p><t:pageLink page="administration/domains/CreateDomainPolicy">${message:pages.administration.domains.index.addDomainPolicy}</t:pageLink></p>

			<h2>${message:pages.administration.domains.index.domainPolicies}</h2>
		 	  <t:grid rowsPerPage="5" source="policies" include="identifier, policyDescription" add="actions" row="domainPolicy">
			  	<t:parameter name="actionsCell">
			  		<t:pageLink page="administration/domains/ManageDomainPolicy" context="domainPolicy.identifier"
						title="${message:pages.administration.domains.index.policy.edit.button}">
						<img src="${asset:context:images/icons/edit.png}" alt="${message:global.button.edit}" />
			 	 	</t:pageLink>
					<t:if test="policyIsDeletable">
			 	 		<t:actionLink t:id="deletePolicy" context="domainPolicy.identifier" t:zone="zoneConfirmDelete"
			 	 			title="${message:pages.administration.domains.index.policy.delete.button}">
			 	 			<span onclick="window_confirm_2.showCenter(true)">
							<img src="${asset:context:images/icons/delete.png}" alt="${message:global.button.delete}" />
							</span>
						</t:actionLink>
					</t:if>
			 	</t:parameter>
			  </t:grid>
		</div>

	</div><!-- id="content" -->
        
    <t:confirmPopup
        t:messageLabel="${message:pages.administration.domains.index.policy.delete.ask}"
        t:eventName="policyDeleteEvent" t:windowId="confirm4" />
        
    <t:zone t:id="zoneConfirmDelete" />

</t:MyBorderLayout>
