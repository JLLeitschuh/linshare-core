<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<t:MyBorderLayout t:title="message:pages.administration.lists.index" t:identifier="lists" t:currentHighlight="lists"
	xmlns:t="http://tapestry.apache.org/schema/tapestry_5_0_0.xsd" xmlns:p="tapestry:parameter">

	<!-- Main content -->
	
		<div id="content">

		<h1>${message:components.myborderlayout.list.title}</h1>
				<br></br>
			<fieldset class="title_criteria_zone" id="searchCriterion">
			<legend align="top" class="palette">${message:global.button.search}</legend>
        		<table>
					<tr>
					<t:form id="form">
						<td>
							<t:textfield t:id="search" t:validate="required" value="targetLists" t:mixins="autoComplete" t:minChars="${autocompleteMin}"/>
						</td>
						<td>
						    <input type="submit" value="${message:global.button.search}"/>
						</td>
					</t:form>
						<td>
							<t:form t:type="form" t:id="resetForm">
								<input type="submit" value="${message:global.button.reset}"/>
							</t:form>
						</td>
					</tr>
				</table>
				<t:form id="formRadio">	
							<t:radiogroup t:id="searchCriteria" t:value="criteriaOnSearch">
				                    <t:radio t:id="public" onclick="this.form.submit()"/>&nbsp;<t:label for="public">${message:pages.lists.radioGroupPub}</t:label>
				                    ${message:global.space}
				                    <t:radio t:id="private" onclick="this.form.submit()" />&nbsp;<t:label for="private">${message:pages.lists.radioGroupPriv}</t:label>
				                    ${message:global.space}				                    
				                    <t:radio t:id="all" onclick="this.form.submit()" />&nbsp;<t:label for="all">${message:pages.lists.radioGroupAll}</t:label>
				                    ${message:global.space}
			               	</t:radiogroup>
			    </t:form>
			</fieldset>
				
				${message:pages.lists.notification}
				<br></br><br></br>
		<h2>${message:pages.administration.lists.index}</h2>
				<t:if t:test="emptyList">
					<t:if t:test="inSearch">
						${message:pages.lists.nothing}
						<p:else>
						${message:pages.administration.lists.index.init}
						</p:else>
					</t:if>
		<p:else>
		<t:grid source="lists" rowsPerPage="10" include="identifier, listDescription , isPublic" add="ownership,edit,delete" row="list">
			 <t:parameter name="identifierCell">
			 <t:pageLink page="lists/DisplayMailingList" context="list.uuid">${list.identifier}</t:pageLink>
			 </t:parameter>
			 <t:parameter name="ownershipCell">
			 	${list.owner.firstName} ${list.owner.lastName}
			 </t:parameter>
			 			 <t:parameter name="isPublicCell">
			 	<t:if test="isPublic">
			 	${message:pages.lists.radioGroupPub}
			 	<p:else>
			 	${message:pages.lists.radioGroupPriv}
			 	</p:else>
			 	</t:if>
			 </t:parameter>
			 <t:parameter name="editCell">
			 	<t:if test="listIsDeletable">
			  		<t:pageLink page="administration/lists/ManageMailingList" context="list.uuid"
						title="${message:pages.lists.index.list.edit.button}">
						<img src="${asset:context:images/icons/edit-button.png}" alt="${message:global.button.edit}" />
			 		 </t:pageLink>
			 	</t:if>
			 </t:parameter>
			 <t:parameter name="deleteCell">
			  	<t:if test="listIsDeletable">
			 	 		<t:actionLink t:id="deleteList" context="list.uuid" t:zone="zoneConfirmDelete"
			 	 			title="${message:pages.lists.index.list.delete.button}">
			 	 			<span onclick="window_confirm.showCenter(true)">
							<img src="${asset:context:images/icons/delete-small.png}" alt="${message:global.button.delete}" />
							</span>
						</t:actionLink>
					</t:if>
			 </t:parameter>
	    </t:grid>
	    
	    </p:else>
		</t:if>
	    
		</div><!-- id="content" -->
	
	    <t:confirmPopup
        t:messageLabel="${message:pages.lists.delete.ask}"
        t:eventName="listDeleteEvent" t:windowId="confirm1" />
	    <t:zone t:id="zoneConfirmDelete" />
	
	
	</t:MyBorderLayout>